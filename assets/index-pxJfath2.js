(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(n){if(n.ep)return;n.ep=!0;const e=a(n);fetch(n.href,e)}})();const y={getLocal:t=>{if(localStorage.getItem(t)!==null){let c=localStorage.getItem(t);return JSON.parse(c)}else return`${t} localstorage is empty`},setLocal:(t,c)=>{localStorage.setItem(t,JSON.stringify(c))},clear:()=>localStorage.clear(),props:()=>{const c=atob("MTU4ZTQ3ZjI2NjI0NGIwMzliMjExNDQxMjQxODAx"),a=e=>{if(e)y.setLocal("location",e),console.log(`New location is ${e}`);else return y.getLocal("location")},l=`https://api.weatherapi.com/v1/forecast.json?key=${c}&q=${a()}&days=2`;return{location:a,forecastURL:()=>l}}},p={1e3:{text:"Clear"},1003:{text:"Cloudy"},1006:{text:"Overcast"},1009:{text:"Fog"},1030:{text:"Mist"},1063:{text:"Light Rain"},1066:{text:"Snowy"},1069:{text:"Sleet"},1072:{text:"Drizzle"},1087:{text:"Thunder"},1114:{text:"Snow"},1117:{text:"Blizzard"},1135:{text:"Foggy"},1147:{text:"Cold Fog"},1150:{text:"Drizzle"},1153:{text:"Drizzle"},1168:{text:"Cold Rain"},1171:{text:"Rain"},1180:{text:"Light Rain"},1183:{text:"Rain"},1186:{text:"Rainy"},1189:{text:"Rain"},1192:{text:"Heavy Rain"},1195:{text:"Heavy Rain"},1198:{text:"Cold Rain"},1201:{text:"Cold Rain"},1204:{text:"Light Sleet"},1207:{text:"Sleet"},1210:{text:"Light Snow"},1213:{text:"Snow"},1216:{text:"Snow"},1219:{text:"Snow"},1222:{text:"Heavy Snow"},1225:{text:"Heavy Snow"},1237:{text:"Hail"},1240:{text:"Light Shower"},1243:{text:"Heavy Shower"},1246:{text:"Downpour"},1249:{text:"Sleet Shower"},1252:{text:"Sleet Shower"},1255:{text:"Snow Shower"},1258:{text:"Snow Shower"},1261:{text:"Hail"},1264:{text:"Ice Showers"},1273:{text:"Rain, Thunder"},1276:{text:"Rain, Thunder"},1279:{text:"Snow, Thunder"},1282:{text:"Snow, Thunder"}},g=()=>{const t=y.props().forecastURL,c=async o=>{try{return await(await fetch(o,{mode:"cors"})).json()}catch(r){throw r}},a=async()=>{try{const o=await c(t()),r=S(o),s=n(r),i=e(s);return console.log("Final API Data:",i),l(i),i}catch(o){throw o}},l=o=>{y.setLocal("localWeatherCopy",o)},n=o=>o,e=o=>{const r=s=>{Object.keys(s).forEach(i=>{if(i==="condition"){const d=s[i].code.toString();s[i].text=p[d].text}else typeof s[i]=="object"&&r(s[i])})};return r(o),o};return{getData:a}},S=t=>{const c={name:t.location.name,country:t.location.country,localtime:t.location.localtime},a=(e,o)=>({temp_c:Math.trunc(t.forecast.forecastday[e].hour[o].temp_c)+"°",dayNight:t.forecast.forecastday[e].hour[o].is_day?"day":"night",wind_dir:t.forecast.forecastday[e].hour[o].wind_dir,rainchance:t.forecast.forecastday[e].hour[o].chance_of_rain+"%",condition:{text:t.forecast.forecastday[e].hour[o].condition.text,icon:t.forecast.forecastday[e].hour[o].condition.icon.replace(/\/\/cdn.weatherapi.com\/weather\/64x64\//,"images/conditions/"),code:t.forecast.forecastday[e].hour[o].condition.code}}),l={temp_c:Math.trunc(t.current.temp_c)+"°",maxtemp:Math.trunc(t.forecast.forecastday[0].day.maxtemp_c)+"°",dayNight:t.current.is_day?"day":"night",wind_dir:t.current.wind_dir,rainchance:t.forecast.forecastday[0].day.daily_chance_of_rain+"%",condition:{text:t.current.condition.text,icon:t.current.condition.icon.replace(/\/\/cdn.weatherapi.com\/weather\/64x64\//,"images/conditions/"),code:t.current.condition.code},hourly:{12:a(0,12),3:a(0,15),6:a(0,18),9:a(0,21)}},n={temp_c:Math.trunc(t.forecast.forecastday[1].day.maxtemp_c)+"°",maxtemp:Math.trunc(t.forecast.forecastday[1].day.maxtemp_c)+"°",dayNight:t.forecast.forecastday[1].hour[16].is_day?"day":"night",wind_dir:t.forecast.forecastday[1].hour[16].wind_dir,rainchance:t.forecast.forecastday[1].day.daily_chance_of_rain+"%",condition:{text:t.forecast.forecastday[1].day.condition.text,icon:t.forecast.forecastday[1].day.condition.icon.replace(/\/\/cdn.weatherapi.com\/weather\/64x64\//,"images/conditions/"),code:t.forecast.forecastday[1].day.condition.code},hourly:{12:a(1,12),3:a(1,15),6:a(1,18),9:a(1,21)}};return{location:c,today:l,tomorrow:n}},x=()=>{const t={date:document.querySelector("#date"),location:document.querySelector("#location"),centreTemp:document.querySelector("#centreTemp"),centreHigh:document.querySelector("#centreHigh"),centreConditionImg:document.querySelector("#centreConditionImg"),centreConditionText:document.querySelector("#centreConditionText"),centrePrecipPercent:document.querySelector("#centrePrecipPercent"),centreWindCardinal:document.querySelector("#centreWindCardinal")},c=(e,o)=>{e&&(e.textContent=o)},a=e=>{const o=y.getLocal("localWeatherCopy"),r=o[e];c(t.date,r.date),c(t.location,o.location.name),c(t.centreTemp,r.temp_c),c(t.centreHigh,`High: ${r.maxtemp}`),c(t.centreConditionImg,r.condition.icon),c(t.centreConditionText,r.condition.text),c(t.centrePrecipPercent,`Chance: ${r.rainchance}`),c(t.centreWindCardinal,r.wind_dir)},l=e=>{const o=y.getLocal("localWeatherCopy"),r=[12,3,6,9];for(const s of r){const i=o[e].hourly[s],d=document.querySelector(`[data-hour="${s}"]`),h=d.querySelector(".hourlyConditionImg"),f=d.querySelector(".hourlyConditionText"),u=d.querySelector(".hourlyRainChance"),m=d.querySelector(".hourlyWindDirection");c(h,i.condition.icon),c(f,i.condition.text),c(u,i.rainchance),c(m,i.wind_dir)}};return{exec:async e=>{await g().getData(),a(e),l(e)}}},w=()=>({applyListeners:()=>{document.querySelector("#today").addEventListener("click",()=>x().exec("today")),document.querySelector("#tomorrow").addEventListener("click",()=>x().exec("tomorrow"))}});x().exec("today");w().applyListeners();
